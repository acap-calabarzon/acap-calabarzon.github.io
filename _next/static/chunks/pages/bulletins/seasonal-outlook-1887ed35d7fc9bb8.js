(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1355],{75746:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulletins/seasonal-outlook",function(){return t(418)}])},418:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return A}});var r=t(34051),o=t.n(r),i=t(85893),a=t(43370),s=t(47426),c=t(21323),l=t(90155),u=t(27392),d=t(67294),f=t(87357),p=t(26447),h=t(15861),v=t(61903),m=t(87109),x=t(81458),w=t(86886),g=t(66242),b=t(44267),y=t(11057),j=t(98456),Z=t(42761),k=t(62665),S=t(91379),_=t(47376),z=t(56693),O=t(44634);function P(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){P(i,r,o,a,s,"next",e)}function s(e){P(i,r,o,a,s,"throw",e)}a(void 0)}))}}function L(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){L(e,n,t[n])}))}return e}({},l.n5,{collection:l.Do.PDF_CROPS,type:u.Ry.SEASONAL,urlsegment:{keyword:"bulletins%2F",charlength:12}}),N=function(e){if(!e)return"";var n=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,n)).toFixed(1)," ").concat(["B","KB","MB","GB","TB"][n])},R="AIzaSyBn3ZNnNJAgAjHKWV3zgjZ-z_xoRff97BE";var A=!0;n.default=function(e){var n=e.provincelist,t=e.media,r=(0,d.useState)([]),l=r[0],u=r[1],P=(0,d.useState)(!0),L=P[0],A=P[1],D=(0,d.useState)(null),B=D[0],T=D[1],U=(0,d.useState)(""),W=U[0],G=U[1];(0,d.useEffect)((function(){var e=function(){var e=C(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/drive/v3/files?pageSize=1000&q='".concat(encodeURIComponent("1t11o4W7gNyyapZe8SVSygPCmwK92N8yc"),"'+in+parents&fields=files(id,name,mimeType,size,modifiedTime,webViewLink)&key=").concat(R));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch files");case 6:return e.next=8,n.json();case 8:t=e.sent,u(t.files||[]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching Drive files:",e.t0);case 15:return e.prev=15,A(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var I=function(){var e=C(o().mark((function e(n){var t,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(n.id),e.next=4,fetch("https://www.googleapis.com/drive/v3/files/".concat(n.id,"?alt=media&key=").concat(R));case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Download failed");case 7:return e.next=9,t.blob();case 9:r=e.sent,i=URL.createObjectURL(r),(a=document.createElement("a")).href=i,a.download=n.name,a.click(),URL.revokeObjectURL(i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),window.open(n.webViewLink,"_blank");case 21:return e.prev=21,T(null),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(n){return e.apply(this,arguments)}}(),F=l.filter((function(e){return e.name.toLowerCase().includes(W.toLowerCase())}));return(0,i.jsxs)("div",{id:"acap-bulletins-seasonal",children:[(0,i.jsx)(a.Z,{title:"Agro-Climatic Advisory Portal - ".concat(s.Gt," (ACAP-").concat(s.Gt.toUpperCase(),") Regional Seasonal Climate Outlook and Advisory Bulletins"),ogDescription:t.description,ogImageURL:t.url,ogURL:t.path,canonicalURL:t.path}),(0,i.jsx)(c.Z,{provinces:n,subtitle:"Seasonal Outlook",currentDefaultBulletin:E}),(0,i.jsxs)(f.Z,{sx:{p:{xs:2,sm:4}},children:[(0,i.jsx)(p.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:(0,i.jsx)(h.Z,{align:"left",color:"text.secondary",variant:"body2",children:"Files loaded from the Seasonal Advisory Google Drive folder."})}),(0,i.jsx)(v.Z,{fullWidth:!0,placeholder:"Search files...",variant:"outlined",size:"small",value:W,onChange:function(e){return G(e.target.value)},sx:{mb:3,maxWidth:400},InputProps:{startAdornment:(0,i.jsx)(m.Z,{position:"start",children:(0,i.jsx)(Z.Z,{color:"action"})})}}),L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{sx:{mb:2}}),(0,i.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:"Loading files..."})]}):0===F.length?(0,i.jsxs)(h.Z,{color:"text.secondary",variant:"body2",children:["No files found ",W?'for "'.concat(W,'"'):"","."]}):(0,i.jsx)(w.ZP,{container:!0,spacing:2,children:F.map((function(e){return(0,i.jsx)(w.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsx)(g.Z,{variant:"outlined",sx:{borderRadius:2,boxShadow:"none",height:"100%",transition:"background 0.2s","&:hover":{bgcolor:"grey.50"}},children:(0,i.jsxs)(b.Z,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[(0,i.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:[(n=e.mimeType,t=e.name,(null===n||void 0===n?void 0:n.includes("pdf"))?(0,i.jsx)(k.Z,{color:"error",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("presentation"))||(null===t||void 0===t?void 0:t.endsWith(".pptx"))?(0,i.jsx)(_.Z,{color:"warning",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("word"))||(null===t||void 0===t?void 0:t.endsWith(".docx"))?(0,i.jsx)(S.Z,{color:"primary",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("image"))||/\.(jpg|jpeg|png|gif|webp)$/i.test(t)?(0,i.jsx)(z.Z,{color:"success",fontSize:"small"}):(0,i.jsx)(O.Z,{color:"action",fontSize:"small"})),(0,i.jsx)(h.Z,{variant:"subtitle2",fontWeight:600,noWrap:!0,title:e.name,children:e.name})]}),(0,i.jsxs)(h.Z,{variant:"caption",color:"text.secondary",display:"block",mb:1,children:[e.mimeType," ",e.size?"\u2022 ".concat(N(Number(e.size))):""]}),(0,i.jsxs)(p.Z,{direction:"row",spacing:1,children:[(0,i.jsx)(y.Z,{variant:"contained",color:"primary",size:"small",onClick:function(){return I(e)},disabled:B===e.id,startIcon:B===e.id?(0,i.jsx)(j.Z,{size:14,color:"inherit"}):null,sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:B===e.id?"Downloading...":"Download"}),(0,i.jsx)(y.Z,{variant:"outlined",color:"secondary",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:"View"})]})]})})},e.id);var n,t}))})]})]})}}},function(e){e.O(0,[5778,3593,9964,8858,6223,6279,3410,9181,1362,1393,7316,9774,2888,179],(function(){return n=75746,e(e.s=n);var n}));var n=e.O();_N_E=n}]);