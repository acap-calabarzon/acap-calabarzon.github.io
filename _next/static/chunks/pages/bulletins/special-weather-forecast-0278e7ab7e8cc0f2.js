(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1025],{60181:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var i=r(n(64938)),o=n(85893),a=(0,i.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.Z=a},35097:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(28979);function i(e){return(0,r.Z)("MuiDivider",e)}const o=(0,n(76087).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},18972:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(63366),i=n(87462),o=n(67294),a=n(86010),s=n(27192),c=n(41796),l=n(11496),u=n(33616),d=n(59773),p=n(47739),f=n(58974),m=n(51705),h=n(35097),v=n(84592),x=n(26336),b=n(28979);function g(e){return(0,b.Z)("MuiMenuItem",e)}var y=(0,n(76087).Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),j=n(85893);const w=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],Z=(0,l.ZP)(p.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${y.focusVisible}`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${y.selected}:hover`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${y.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${y.disabled}`]:{opacity:e.palette.action.disabledOpacity},[`& + .${h.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${h.Z.inset}`]:{marginLeft:52},[`& .${x.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${x.Z.inset}`]:{paddingLeft:36},[`& .${v.Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${v.Z.root} svg`]:{fontSize:"1.25rem"}}))));var S=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:l="li",dense:p=!1,divider:h=!1,disableGutters:v=!1,focusVisibleClassName:x,role:b="menuitem",tabIndex:y}=n,S=(0,r.Z)(n,w),k=o.useContext(d.Z),C={dense:p||k.dense||!1,disableGutters:v},O=o.useRef(null);(0,f.Z)((()=>{c&&O.current&&O.current.focus()}),[c]);const P=(0,i.Z)({},n,{dense:C.dense,divider:h,disableGutters:v}),A=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:a,classes:c}=e,l={root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",a&&"selected"]},u=(0,s.Z)(l,g,c);return(0,i.Z)({},c,u)})(n),I=(0,m.Z)(O,t);let _;return n.disabled||(_=void 0!==y?y:-1),(0,j.jsx)(d.Z.Provider,{value:C,children:(0,j.jsx)(Z,(0,i.Z)({ref:I,role:b,tabIndex:_,component:l,focusVisibleClassName:(0,a.Z)(A.focusVisible,x)},S,{ownerState:P,classes:A}))})}))},95401:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulletins/special-weather-forecast",function(){return n(1473)}])},84213:function(e,t,n){"use strict";n.r(t);var r=n(34051),i=n.n(r),o=n(85893),a=n(67294),s=n(15861),c=n(55113),l=n(87357),u=n(98456),d=n(78462),p=n(97212),f=n(93946),m=n(59334),h=n(57922),v=n(50122),x=n(60181),b=n(23508);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var e=(0,a.useState)({}),t=e[0],n=e[1],r=(0,a.useState)(!0),g=r[0],y=r[1],S=(0,a.useState)({}),k=S[0],C=S[1],O=function(e){C((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}({},t,w({},e,!t[e]))}))};return(0,a.useEffect)((function(){function e(){return(e=j(i().mark((function e(){var t,r,o,a,s,c,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pubfiles.pagasa.dost.gov.ph/tamss/weather/bulletin/");case 3:return t=e.sent,e.next=6,t.text();case 6:r=e.sent,o=new DOMParser,a=o.parseFromString(r,"text/html"),s=Array.from(a.querySelectorAll("a")).map((function(e){return e.getAttribute("href")})).filter((function(e){return e&&e.match(/^TCB.*\.(pdf|docx?|xlsx?)$/i)})),c=s.length>0?s:["TCB#1_AURING.pdf","TCB#2_AURING.pdf","TCB#1_BISING.pdf","TCB#2_BISING.pdf","TCB#3_BISING.pdf","TCB#1_CABAYAN.pdf"],l={},c.forEach((function(e){var t=e.match(/TCB(?:%23|#)(\d+)_([^.]+)/i);if(t){var n=parseInt(t[1]),r=t[2].toUpperCase();l[r]||(l[r]=[]),l[r].push({num:n,file:e})}})),u=Object.keys(l).sort((function(e,t){return t.localeCompare(e)})).reduce((function(e,t){return e[t]=l[t].sort((function(e,t){return t.num-e.num})),e}),{}),n(u),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching bulletins:",e.t0),n({});case 21:return e.prev=21,y(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.Z,{variant:"h5",gutterBottom:!0,children:"PAGASA Special Weather Bulletins"}),(0,o.jsx)(c.Z,{elevation:3,sx:{mt:4,p:3,borderRadius:3,backgroundColor:"background.paper"},children:g?(0,o.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:(0,o.jsx)(u.Z,{})}):0===Object.keys(t).length?(0,o.jsx)(s.Z,{color:"text.secondary",children:"No bulletins found."}):(0,o.jsx)(d.Z,{children:Object.entries(t).map((function(e){var t=Z(e,2),n=t[0],r=t[1];return(0,o.jsxs)(l.Z,{sx:{mb:1},children:[(0,o.jsx)(p.ZP,{sx:{borderRadius:1,backgroundColor:"action.hover",mb:.5,"&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,o.jsx)(f.Z,{onClick:function(){return O(n)},children:k[n]?(0,o.jsx)(x.Z,{}):(0,o.jsx)(b.Z,{})}),children:(0,o.jsx)(m.Z,{primary:(0,o.jsx)(s.Z,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:n})})}),(0,o.jsx)(h.Z,{in:k[n],timeout:"auto",unmountOnExit:!0,children:(0,o.jsx)(d.Z,{dense:!0,sx:{pl:3},children:r.map((function(e){var t=e.file,n=e.num;return(0,o.jsx)(p.ZP,{disablePadding:!0,sx:{py:.5,px:1,borderRadius:1,transition:"background-color 0.2s","&:hover":{backgroundColor:"action.hover"}},children:(0,o.jsx)(m.Z,{primary:(0,o.jsxs)(v.Z,{href:"https://pubfiles.pagasa.dost.gov.ph/tamss/weather/bulletin/".concat(t),target:"_blank",rel:"noopener noreferrer",underline:"hover",color:"primary",children:["Bulletin #",n]})})},t)}))})})]},n)}))})})]})}},1473:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return N}});var r=n(34051),i=n.n(r),o=n(85893),a=n(43370),s=n(47426),c=n(21323),l=n(90155),u=n(27392),d=n(67294),p=n(87357),f=n(26447),m=n(15861),h=n(61903),v=n(87109),x=n(94054),b=n(47312),g=n(18360),y=n(18972),j=n(81458),w=n(86886),Z=n(66242),S=n(44267),k=n(11057),C=n(98456),O=n(42761),P=n(62665),A=n(91379),I=n(47376),_=n(56693),B=n(44634),T=n(84213);function E(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,s,"next",e)}function s(e){E(o,r,i,a,s,"throw",e)}a(void 0)}))}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}({},l.n5,{collection:l.Do.PDF_CROPS_SPECIAL,type:u.Ry.SPECIAL_WEATHER,urlsegment:{keyword:"bulletins_special%2F",charlength:20}}),F="AIzaSyBn3ZNnNJAgAjHKWV3zgjZ-z_xoRff97BE",G=function(e){if(!e)return"";var t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(1)," ").concat(["B","KB","MB","GB","TB"][t])};var N=!0;t.default=function(e){var t=e.provincelist,n=e.media,r=(0,d.useState)([]),l=r[0],u=r[1],E=(0,d.useState)(!0),R=E[0],N=E[1],M=(0,d.useState)(null),W=M[0],D=M[1],V=(0,d.useState)(""),$=V[0],U=V[1],q=(0,d.useState)(""),H=q[0],K=q[1];(0,d.useEffect)((function(){var e=function(){var e=L(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/drive/v3/files?pageSize=1000&q='".concat("1W-poEn1HV9iiv7tELM8WKKnPSA3F1V3O","' in parents&fields=files(id,name,mimeType,size,modifiedTime,webViewLink)&key=").concat(F));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch files");case 6:return e.next=8,t.json();case 8:n=e.sent,u(n.files||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching Drive files:",e.t0),u([]);case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var X=function(){var e=L(i().mark((function e(t){var n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(t.id),e.next=4,fetch("https://www.googleapis.com/drive/v3/files/".concat(t.id,"?alt=media&key=").concat(F));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Download failed");case 7:return e.next=9,n.blob();case 9:r=e.sent,o=URL.createObjectURL(r),(a=document.createElement("a")).href=o,a.download=t.name,a.click(),URL.revokeObjectURL(o),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),window.open(t.webViewLink,"_blank");case 21:return e.prev=21,D(null),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),J=(0,d.useMemo)((function(){return l.filter((function(e){var t=e.name.toLowerCase().includes($.toLowerCase()),n=!H||"pdf"===H&&e.mimeType.includes("pdf")||"word"===H&&e.mimeType.includes("word")||"ppt"===H&&e.mimeType.includes("presentation")||"image"===H&&e.mimeType.includes("image");return t&&n}))}),[l,$,H]);return(0,o.jsxs)("div",{id:"acap-bulletins-special",children:[(0,o.jsx)(a.Z,{title:"Agro-Climatic Advisory Portal - ".concat(s.Gt," (ACAP-").concat(s.Gt.toUpperCase(),") Special Weather Forecast Bulletins"),ogDescription:n.description,ogImageURL:n.url,ogURL:n.path,canonicalURL:n.path}),(0,o.jsx)(c.Z,{provinces:t,subtitle:"Special Weather",currentDefaultBulletin:z}),(0,o.jsxs)(p.Z,{sx:{p:{xs:2,sm:4}},children:[(0,o.jsx)(f.Z,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",mb:2,children:(0,o.jsx)(m.Z,{color:"text.secondary",variant:"body2",children:"Files loaded from the Special Weather Advisory Google Drive folder."})}),(0,o.jsxs)(f.Z,{direction:{xs:"column",sm:"row"},spacing:2,mb:3,children:[(0,o.jsx)(h.Z,{placeholder:"Search files...",variant:"outlined",size:"small",value:$,onChange:function(e){return U(e.target.value)},sx:{maxWidth:400},InputProps:{startAdornment:(0,o.jsx)(v.Z,{position:"start",children:(0,o.jsx)(O.Z,{color:"action"})})}}),(0,o.jsxs)(x.Z,{size:"small",sx:{minWidth:180},children:[(0,o.jsx)(b.Z,{children:"Filter by type"}),(0,o.jsxs)(g.Z,{value:H,label:"Filter by type",onChange:function(e){return K(e.target.value)},children:[(0,o.jsx)(y.Z,{value:"",children:"All"}),(0,o.jsx)(y.Z,{value:"pdf",children:"PDF"}),(0,o.jsx)(y.Z,{value:"word",children:"Word"}),(0,o.jsx)(y.Z,{value:"ppt",children:"PowerPoint"}),(0,o.jsx)(y.Z,{value:"image",children:"Images"})]})]})]}),R?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.Z,{sx:{mb:2}}),(0,o.jsx)(m.Z,{color:"text.secondary",variant:"body2",children:"Loading files..."})]}):0===J.length?(0,o.jsxs)(m.Z,{color:"text.secondary",variant:"body2",children:["No files found ",$?'for "'.concat($,'"'):"","."]}):(0,o.jsx)(w.ZP,{container:!0,spacing:2,children:J.map((function(e){return(0,o.jsx)(w.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,o.jsx)(Z.Z,{variant:"outlined",sx:{borderRadius:2,boxShadow:"none",height:"100%",transition:"background 0.2s","&:hover":{bgcolor:"grey.50"}},children:(0,o.jsxs)(S.Z,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[(0,o.jsxs)(f.Z,{direction:"row",alignItems:"center",spacing:1,children:[(t=e.mimeType,n=e.name,(null===t||void 0===t?void 0:t.includes("pdf"))?(0,o.jsx)(P.Z,{color:"error",fontSize:"small"}):(null===t||void 0===t?void 0:t.includes("presentation"))||(null===n||void 0===n?void 0:n.endsWith(".pptx"))?(0,o.jsx)(I.Z,{color:"warning",fontSize:"small"}):(null===t||void 0===t?void 0:t.includes("word"))||(null===n||void 0===n?void 0:n.endsWith(".docx"))?(0,o.jsx)(A.Z,{color:"primary",fontSize:"small"}):(null===t||void 0===t?void 0:t.includes("image"))||/\.(jpg|jpeg|png|gif|webp)$/i.test(n)?(0,o.jsx)(_.Z,{color:"success",fontSize:"small"}):(0,o.jsx)(B.Z,{color:"action",fontSize:"small"})),(0,o.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,noWrap:!0,title:e.name,children:e.name})]}),(0,o.jsxs)(m.Z,{variant:"caption",color:"text.secondary",display:"block",mb:1,children:[e.mimeType," ",e.size?"\u2022 ".concat(G(Number(e.size))):""]}),(0,o.jsxs)(f.Z,{direction:"row",spacing:1,children:[(0,o.jsx)(k.Z,{variant:"contained",color:"primary",size:"small",onClick:function(){return X(e)},disabled:W===e.id,startIcon:W===e.id?(0,o.jsx)(C.Z,{size:14,color:"inherit"}):null,sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:W===e.id?"Downloading...":"Download"}),(0,o.jsx)(k.Z,{variant:"outlined",color:"secondary",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:"View"})]})]})})},e.id);var t,n}))})]}),(0,o.jsx)(T.default,{})]})}}},function(e){e.O(0,[5778,3593,9964,8858,6223,6279,3410,9181,1362,1393,7316,9774,2888,179],(function(){return t=95401,e(e.s=t);var t}));var t=e.O();_N_E=t}]);