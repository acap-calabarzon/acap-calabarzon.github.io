(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1025],{95401:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulletins/special-weather-forecast",function(){return r(1473)}])},84213:function(e,n,r){"use strict";r.r(n);var t=r(34051),o=r.n(t),i=r(85893),a=r(67294),c=r(15861),s=r(55113),l=r(87357),u=r(98456),d=r(78462),f=r(97212),p=r(93946),h=r(59334),m=r(57922),x=r(50122),v=r(60181),b=r(23508);function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function g(e,n,r,t,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void r(l)}c.done?n(s):Promise.resolve(s).then(t,o)}function j(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){g(i,t,o,a,c,"next",e)}function c(e){g(i,t,o,a,c,"throw",e)}a(void 0)}))}}function w(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return y(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(){var e=(0,a.useState)({}),n=e[0],r=e[1],t=(0,a.useState)(!0),y=t[0],g=t[1],S=(0,a.useState)({}),k=S[0],C=S[1],_=function(e){C((function(n){return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){w(e,n,r[n])}))}return e}({},n,w({},e,!n[e]))}))};return(0,a.useEffect)((function(){function e(){return(e=j(o().mark((function e(){var n,t,i,a,c,s,l,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pubfiles.pagasa.dost.gov.ph/tamss/weather/bulletin/");case 3:return n=e.sent,e.next=6,n.text();case 6:t=e.sent,i=new DOMParser,a=i.parseFromString(t,"text/html"),c=Array.from(a.querySelectorAll("a")).map((function(e){return e.getAttribute("href")})).filter((function(e){return e&&e.match(/^TCB.*\.(pdf|docx?|xlsx?)$/i)})),s=c.length>0?c:["TCB#1_AURING.pdf","TCB#2_AURING.pdf","TCB#1_BISING.pdf","TCB#2_BISING.pdf","TCB#3_BISING.pdf","TCB#1_CABAYAN.pdf"],l={},s.forEach((function(e){var n=e.match(/TCB(?:%23|#)(\d+)_([^.]+)/i);if(n){var r=parseInt(n[1]),t=n[2].toUpperCase();l[t]||(l[t]=[]),l[t].push({num:r,file:e})}})),u=Object.keys(l).sort((function(e,n){return n.localeCompare(e)})).reduce((function(e,n){return e[n]=l[n].sort((function(e,n){return n.num-e.num})),e}),{}),r(u),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching bulletins:",e.t0),r({});case 21:return e.prev=21,g(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{variant:"h5",gutterBottom:!0,children:"PAGASA Special Weather Bulletins"}),(0,i.jsx)(s.Z,{elevation:3,sx:{mt:4,p:3,borderRadius:3,backgroundColor:"background.paper"},children:y?(0,i.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",py:3},children:(0,i.jsx)(u.Z,{})}):0===Object.keys(n).length?(0,i.jsx)(c.Z,{color:"text.secondary",children:"No bulletins found."}):(0,i.jsx)(d.Z,{children:Object.entries(n).map((function(e){var n=Z(e,2),r=n[0],t=n[1];return(0,i.jsxs)(l.Z,{sx:{mb:1},children:[(0,i.jsx)(f.ZP,{sx:{borderRadius:1,backgroundColor:"action.hover",mb:.5,"&:hover":{backgroundColor:"action.selected"}},secondaryAction:(0,i.jsx)(p.Z,{onClick:function(){return _(r)},children:k[r]?(0,i.jsx)(v.Z,{}):(0,i.jsx)(b.Z,{})}),children:(0,i.jsx)(h.Z,{primary:(0,i.jsx)(c.Z,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:r})})}),(0,i.jsx)(m.Z,{in:k[r],timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(d.Z,{dense:!0,sx:{pl:3},children:t.map((function(e){var n=e.file,r=e.num;return(0,i.jsx)(f.ZP,{disablePadding:!0,sx:{py:.5,px:1,borderRadius:1,transition:"background-color 0.2s","&:hover":{backgroundColor:"action.hover"}},children:(0,i.jsx)(h.Z,{primary:(0,i.jsxs)(x.Z,{href:"https://pubfiles.pagasa.dost.gov.ph/tamss/weather/bulletin/".concat(n),target:"_blank",rel:"noopener noreferrer",underline:"hover",color:"primary",children:["Bulletin #",r]})})},n)}))})})]},r)}))})})]})}},1473:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return G}});var t=r(34051),o=r.n(t),i=r(85893),a=r(43370),c=r(47426),s=r(21323),l=r(90155),u=r(27392),d=r(67294),f=r(87357),p=r(26447),h=r(15861),m=r(61903),x=r(87109),v=r(94054),b=r(47312),y=r(18360),g=r(18972),j=r(81458),w=r(86886),Z=r(66242),S=r(44267),k=r(11057),C=r(98456),_=r(42761),P=r(62665),A=r(91379),O=r(47376),B=r(56693),E=r(44634),I=r(84213),T=r(83454);function z(e,n,r,t,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void r(l)}c.done?n(s):Promise.resolve(s).then(t,o)}function L(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){z(i,t,o,a,c,"next",e)}function c(e){z(i,t,o,a,c,"throw",e)}a(void 0)}))}}function N(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var R=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){N(e,n,r[n])}))}return e}({},l.n5,{collection:l.Do.PDF_CROPS_SPECIAL,type:u.Ry.SPECIAL_WEATHER,urlsegment:{keyword:"bulletins_special%2F",charlength:20}}),D=T.env.NEXT_PUBLIC_SPECIAL_FOLDER_ID,W="AIzaSyBn3ZNnNJAgAjHKWV3zgjZ-z_xoRff97BE",F=function(e){if(!e)return"";var n=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,n)).toFixed(1)," ").concat(["B","KB","MB","GB","TB"][n])};var G=!0;n.default=function(e){var n=e.provincelist,r=e.media,t=(0,d.useState)([]),l=t[0],u=t[1],T=(0,d.useState)(!0),z=T[0],N=T[1],G=(0,d.useState)(null),U=G[0],M=G[1],V=(0,d.useState)(""),X=V[0],$=V[1],q=(0,d.useState)(""),H=q[0],K=q[1];(0,d.useEffect)((function(){var e=function(){var e=L(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.googleapis.com/drive/v3/files?pageSize=1000&q='".concat(D,"' in parents&fields=files(id,name,mimeType,size,modifiedTime,webViewLink)&key=").concat(W));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch files");case 6:return e.next=8,n.json();case 8:r=e.sent,u(r.files||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching Drive files:",e.t0),u([]);case 16:return e.prev=16,N(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var J=function(){var e=L(o().mark((function e(n){var r,t,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(n.id),e.next=4,fetch("https://www.googleapis.com/drive/v3/files/".concat(n.id,"?alt=media&key=").concat(W));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Download failed");case 7:return e.next=9,r.blob();case 9:t=e.sent,i=URL.createObjectURL(t),(a=document.createElement("a")).href=i,a.download=n.name,a.click(),URL.revokeObjectURL(i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),window.open(n.webViewLink,"_blank");case 21:return e.prev=21,M(null),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(n){return e.apply(this,arguments)}}(),Y=(0,d.useMemo)((function(){return l.filter((function(e){var n=e.name.toLowerCase().includes(X.toLowerCase()),r=!H||"pdf"===H&&e.mimeType.includes("pdf")||"word"===H&&e.mimeType.includes("word")||"ppt"===H&&e.mimeType.includes("presentation")||"image"===H&&e.mimeType.includes("image");return n&&r}))}),[l,X,H]);return(0,i.jsxs)("div",{id:"acap-bulletins-special",children:[(0,i.jsx)(a.Z,{title:"Agro-Climatic Advisory Portal - ".concat(c.Gt," (ACAP-").concat(c.Gt.toUpperCase(),") Special Weather Forecast Bulletins"),ogDescription:r.description,ogImageURL:r.url,ogURL:r.path,canonicalURL:r.path}),(0,i.jsx)(s.Z,{provinces:n,subtitle:"Special Weather",currentDefaultBulletin:R}),(0,i.jsxs)(f.Z,{sx:{p:{xs:2,sm:4}},children:[(0,i.jsx)(p.Z,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",mb:2,children:(0,i.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:"Files loaded from the 10-Day Weather Advisory Google Drive folder."})}),(0,i.jsxs)(p.Z,{direction:{xs:"column",sm:"row"},spacing:2,mb:3,children:[(0,i.jsx)(m.Z,{placeholder:"Search files...",variant:"outlined",size:"small",value:X,onChange:function(e){return $(e.target.value)},sx:{maxWidth:400},InputProps:{startAdornment:(0,i.jsx)(x.Z,{position:"start",children:(0,i.jsx)(_.Z,{color:"action"})})}}),(0,i.jsxs)(v.Z,{size:"small",sx:{minWidth:180},children:[(0,i.jsx)(b.Z,{children:"Filter by type"}),(0,i.jsxs)(y.Z,{value:H,label:"Filter by type",onChange:function(e){return K(e.target.value)},children:[(0,i.jsx)(g.Z,{value:"",children:"All"}),(0,i.jsx)(g.Z,{value:"pdf",children:"PDF"}),(0,i.jsx)(g.Z,{value:"word",children:"Word"}),(0,i.jsx)(g.Z,{value:"ppt",children:"PowerPoint"}),(0,i.jsx)(g.Z,{value:"image",children:"Images"})]})]})]}),z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{sx:{mb:2}}),(0,i.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:"Loading files..."})]}):0===Y.length?(0,i.jsxs)(h.Z,{color:"text.secondary",variant:"body2",children:["No files found ",X?'for "'.concat(X,'"'):"","."]}):(0,i.jsx)(w.ZP,{container:!0,spacing:2,children:Y.map((function(e){return(0,i.jsx)(w.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsx)(Z.Z,{variant:"outlined",sx:{borderRadius:2,boxShadow:"none",height:"100%",transition:"background 0.2s","&:hover":{bgcolor:"grey.50"}},children:(0,i.jsxs)(S.Z,{sx:{p:1.5,"&:last-child":{pb:1.5}},children:[(0,i.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:[(n=e.mimeType,r=e.name,(null===n||void 0===n?void 0:n.includes("pdf"))?(0,i.jsx)(P.Z,{color:"error",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("presentation"))||(null===r||void 0===r?void 0:r.endsWith(".pptx"))?(0,i.jsx)(O.Z,{color:"warning",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("word"))||(null===r||void 0===r?void 0:r.endsWith(".docx"))?(0,i.jsx)(A.Z,{color:"primary",fontSize:"small"}):(null===n||void 0===n?void 0:n.includes("image"))||/\.(jpg|jpeg|png|gif|webp)$/i.test(r)?(0,i.jsx)(B.Z,{color:"success",fontSize:"small"}):(0,i.jsx)(E.Z,{color:"action",fontSize:"small"})),(0,i.jsx)(h.Z,{variant:"subtitle2",fontWeight:600,noWrap:!0,title:e.name,children:e.name})]}),(0,i.jsxs)(h.Z,{variant:"caption",color:"text.secondary",display:"block",mb:1,children:[e.mimeType," ",e.size?"\u2022 ".concat(F(Number(e.size))):""]}),(0,i.jsxs)(p.Z,{direction:"row",spacing:1,children:[(0,i.jsx)(k.Z,{variant:"contained",color:"primary",size:"small",onClick:function(){return J(e)},disabled:U===e.id,startIcon:U===e.id?(0,i.jsx)(C.Z,{size:14,color:"inherit"}):null,sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:U===e.id?"Downloading...":"Download"}),(0,i.jsx)(k.Z,{variant:"outlined",color:"secondary",size:"small",href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",sx:{textTransform:"none",fontSize:"0.75rem",py:.3,px:1.5,flexGrow:1},children:"View"})]})]})})},e.id);var n,r}))})]}),(0,i.jsx)(I.default,{})]})}}},function(e){e.O(0,[5778,3593,3200,9964,6223,6279,1362,3410,173,1393,9003,7316,9774,2888,179],(function(){return n=95401,e(e.s=n);var n}));var n=e.O();_N_E=n}]);